---
layout: post
---

This morning I went through a couple more hours of the Node.js course, and dove into MongoDB and how to get mongodb up and running in a node application and how to perform CRUD operations. I also learned how to utilize Promises, rather than proving a callback to each method, which makes things a lot less convoluted and easier to understand.

For example purposes lets pretend all of the following code is nested inside of the following call to MongoClient.connect The calls to console in the Then and Catch statements are for debugging purposes only.

```javascript
MongoClient.connect(connectionURL, {useNewUrlParser: true}, (error, client) => {
  if (error) {
    return console.log('Unable to connect to database!')
  }
  const db = client.db(databaseName)
```

#### Creating a record

```javascript
//insertMany(docs[,options, callback])
//if no callback is provided, a promise is returned
db.collection('tasks').insertMany([{
    description: 'Get groceries',
    completed: false
  },{
    description: 'Finish homework',
    completed: false
  }
]).then((result) => {
  console.log(result)
}).catch((error) => {
  console.log(error)
})
```

#### Reading a record
To get information from your database the find method is used. The find method returns a 'Cursor' which is an object with multiple methods and information that you can parse or call methods on to retrieve the info you need. This is a good thing because it allowed the data you searched for to be accessed in more ways than one.

For this purpose, I want to return all data in the 'tasks' collection. So I will call .toArray on the .find method, which without a callback, also returns a promise.

```javascript
//find(query[,options])
//providing an empty object will find ALL items in that collection
//providing something like {description: 'Get groceries'} would return that one
//specific piece of data
db.collection('tasks').find({}).toArray().then((data)=>{
  console.log(data)
}).catch((error)=>{
  console.log(error)
})
```

#### Updating a record
```javascript
//Use updateMany or UpdateOne depending on your needs
//updateMany(filter,update[,options, callback])
//update argument can be any number of 'update operators'
//they and their syntax use can be found at https://docs.mongodb.com/manual/reference/operator/update/#id1

//this will update all tasks that are not completed to complete

db.collection('tasks').update({completed: false},{
  $set: { completed: true }
}).then((result) => {
  console.log(result)
}).catch((error) => {
  console.log(error)
})
```

#### Deleting a record

```javascript
///deleteMany or deleteOne depending on your needs
//deleteMany(filter[,options, callback])

//this will delete all completed tasks
db.collection('tasks').deleteMany({completed:true}).then((result)=>{
  console.log(result)
}).catch((error) =>{
  console.log(error)
})
```
