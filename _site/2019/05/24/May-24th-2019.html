<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>May 24th 2019</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
  </head>
  <body>
    <nav>
  
    <a href="/" >
      Home
    </a>
    
    <a href="/blog.html" >
      Blog
    </a>
    
</nav>

    <h1>May 24th 2019</h1>

<p>Today I worked more on the project for Sirius I wrote about yesterday. We will be using React as well as Recharts for React which uses d3 to create modular components for charts and graphs.</p>

<p>Today I created a fake set of data to use as a test for tank levels, and tank levelhistory. I also created a random level updater to mock when we would recieve data from the server that levels have changed. Heres what it looks like (very basic.)</p>

<p><img src="https://github.com/jordanvidrine/coding-journey/blob/master/Daily%20Logs/files/Screenshot_2019-05-24%20React%20App.png" alt="live tank simulation" /></p>

<p>Here is a bit of the code:</p>

<h4 id="main-app">Main App</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import React from 'react';
import {Component} from 'react';
import Tank from './components/Tank';
import TankData from './data/TankData'
import Chart from './components/Chart'
import './app.css'

class App extends Component {
  constructor(props) {
    super(props)
    this.state = {
      TankData: [...TankData]
    }
    this.generateRandomLevels = this.generateRandomLevels.bind(this)
    this.JSONify = this.JSONify.bind(this);
  }

  generateRandomLevels() {
    let tanks = this.state.TankData;
    let newTimeStamp = new Date().toString().split(' ').splice(0,5).join(' ');
    tanks.forEach((tank) =&gt; {
      //save history of current water levels
      tank.history.push({water: tank.currentH20Percent, oil: tank.currentOilPercent, timeStamp: tank.timeStamp});

        //randomize water levels
        let randomWater = Math.floor(Math.random()*7)
        if (Math.random() &gt; .5) {
          if (tank.currentH20Percent + randomWater &lt;= 10) {
            tank.currentH20Percent += randomWater;
          }
        } else {
            if (tank.currentH20Percent - randomWater &gt;= 1) {
              tank.currentH20Percent -= randomWater;
            }
          }

        //randomize oil levels
        let randomOil = Math.floor(Math.random()*10);
        if (Math.random() &gt; .5) {
          if (tank.currentOilPercent + randomOil &lt;= 85) {
            tank.currentOilPercent += randomOil
          }
        } else {
            if (tank.currentOilPercent - randomOil &gt;= 10) {
              tank.currentOilPercent -= randomOil;
            }
          }
      //save new date to 'tank.date'
      tank.timeStamp = newTimeStamp;
    });
    //save state of water levels
    this.setState({
      TankData: [...tanks]
    })
  }

  JSONify(){
    let dataJSON = JSON.stringify(this.state.TankData[0].history);
    console.log(dataJSON)
  }

    render() {

      let tanks = this.state.TankData.map((tank) =&gt; {
        return &lt;Tank tankInfo={tank} key={tank.tankName} /&gt;
      })

      return (
        &lt;div className="App"&gt;
          &lt;div className="tank-container"&gt;
            {tanks}
            &lt;button onClick={this.generateRandomLevels}&gt;Random&lt;/button&gt;
            &lt;button onClick={this.JSONify}&gt;JSONIFY&lt;/button&gt;
          &lt;/div&gt;
          &lt;Chart chartData={this.state.TankData[0].history} /&gt;
        &lt;/div&gt;
      )
    }
  }

export default App;
</code></pre></div></div>

<h4 id="tank-component">Tank Component</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const Tank = props =&gt; {
  let t = props.tankInfo

  let waterStyles = {
    backgroundColor: 'blue',
    color: 'white',
    textAlign: 'center',
    height: (250*(t.currentH20Percent/100)),
    width: "200px",
  }

  let oilHeight = (250*(t.currentOilPercent/100))

  let oilStyles = {
    backgroundColor: 'grey',
    color: 'white',
    textAlign: 'center',
    height: oilHeight,
    width: "200px",
    marginTop: 250-oilHeight-(250*(t.currentH20Percent/100)),
  }

    return (
      &lt;div&gt;
      &lt;div id={t.tankName} className="outer-tank"&gt;
      &lt;div className="oil-tank" style={oilStyles}&gt;
      &lt;/div&gt;
        &lt;div className="water-tank" style={waterStyles}&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;h2&gt;{t.tankName}&lt;/h2&gt;
      &lt;p&gt;{t.time}&lt;/p&gt;
      &lt;/div&gt;
    )
  }

export default Tank
</code></pre></div></div>

<h4 id="chart-component">Chart Component</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import React from 'react';
import {
  LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend,
} from 'recharts';
import './chart.css'

const Chart = props =&gt; {

//important to distribute the data from the array into the array, not sure why it works like this
let propTankData = [...props.chartData];


  return (
    &lt;LineChart width={800} height={300} data={propTankData}
          margin=&gt;
     &lt;XAxis dataKey="timeStamp"/&gt;
     &lt;YAxis/&gt;
     &lt;CartesianGrid strokeDasharray="3 3"/&gt;
     &lt;Tooltip/&gt;
     &lt;Legend /&gt;
     &lt;Line type="monotone" dataKey="oil" stroke="#82ca9d" /&gt;
     &lt;Line type="monotone" dataKey="water" stroke="blue" /&gt;
    &lt;/LineChart&gt;
  )
}

export default Chart
</code></pre></div></div>


  </body>
</html>
